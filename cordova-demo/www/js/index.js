/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * 'License'); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
var app = {
    // Application Constructor
    initialize: function() {
        document.addEventListener('deviceready', this.onDeviceReady.bind(this), false);
    },

    // deviceready Event Handler
    //
    // Bind any cordova events here. Common events are:
    // 'pause', 'resume', etc.
    onDeviceReady: function() {

        var TangemSdk = window.TangemSdk;
        document.getElementById('splashScreen').setAttribute('style', 'display:none;');
        document.getElementById('app').setAttribute('style', 'display:block;');

        document.getElementById('buttonScanCard').addEventListener('click', onScanCard);
        document.getElementById('buttonSignHash').addEventListener('click', onSignHash);
        document.getElementById('buttonSignHashes').addEventListener('click', onSignHashes);
        document.getElementById('buttonCreateWallet').addEventListener('click', onCreateWallet);
        document.getElementById('buttonPurgeWallet').addEventListener('click', onPurgeWallet);
        document.getElementById('buttonSetPassCode').addEventListener('click', onSetPassCode);
        document.getElementById('buttonSetAccessCode').addEventListener('click', onSetAccessCode);
        document.getElementById('buttonResetUserCodes').addEventListener('click', onResetUserCodes);
        document.getElementById('buttonReadFiles').addEventListener('click', onReadFiles);
        document.getElementById('buttonWriteFiles').addEventListener('click', onWriteFiles);
        document.getElementById('buttonDeleteFiles').addEventListener('click', onDeleteFiles);
        document.getElementById('buttonChangeFilesSettings').addEventListener('click', onChangeFilesSettings);
        document.getElementById('buttonJsonRPCRequest').addEventListener('click', onJsonRPCRequest);

        function getElementValue(elementId) {
            var element = document.getElementById(elementId);
            return element ? element.value : undefined;
        }

        function textareaSetValue(textareaId, result, error) {
            var ta = document.getElementById(textareaId);
            if (ta) {
                ta.innerText = JSON.stringify(error||result, null, 2);
            }
        }

        function setByClass(className, value) {
            var els = document.getElementsByClassName(className);

            Array.prototype.forEach.call(els, function(el) {
                el.value = value;
            });
        }

        function callback(textareaId) {
            return function (result, error) {
                textareaSetValue(textareaId, result, error)
            }
        }

        function onScanCard() {
            var body = getElementValue('messageBody');
            var header = getElementValue('messageHeader');
            /** @type {Message} */
            var initialMessage = {};
            if (body) {
                initialMessage.body = body;
            }
            if (header) {
                initialMessage.header = header;
            }

            TangemSdk.scanCard(initialMessage, function (response, error) {
                textareaSetValue('taScanCard', response, error);
                if (response) {
                    setByClass('cardId', response.cardId);
                    if (response.wallets.length > 0) {
                        setByClass('walletPublicKey', response.wallets[0].publicKey);
                    }
                    if (response.supportedCurves) {
                        var curveSelect = document.getElementById("createWalletEllipticCurve");
                        var i, L = curveSelect.options.length - 1;
                        for(i = L; i >= 0; i--) {
                            curveSelect.remove(i);
                        }
                        for(i = 0; i < response.supportedCurves.length; i++ ) {
                            var option = document.createElement( 'option' );
                            option.value = option.text = response.supportedCurves[i];
                            curveSelect.add( option );
                        }
                    }
                }
            });
        }

        function onSignHash() {
            var hash = getElementValue('hash');
            var walletPublicKey = getElementValue('signHashWalletPublicKey');
            var cardId = getElementValue('signHashCardId');
            TangemSdk.signHash(hash, walletPublicKey, undefined, cardId, undefined, callback('taSignHash'));
        }

        function onSignHashes() {
            var hashes = [];
            var hash1 = getElementValue('hash1');
            if (hash1) {
                hashes.push(hash1);
            }
            var hash2 = getElementValue('hash2');
            if (hash2) {
                hashes.push(hash2);
            }
            var hash3 = getElementValue('hash3');
            if (hash3) {
                hashes.push(hash3);
            }
            var walletPublicKey = getElementValue('signHashesWalletPublicKey');
            var cardId = getElementValue('signHashesCardId');
            TangemSdk.signHashes(hashes, walletPublicKey, undefined, cardId, undefined, callback('taSignHashes'));
        }

        function onCreateWallet() {
            var curve = getElementValue('createWalletEllipticCurve');
            var cardId = getElementValue('signCardId');
            TangemSdk.createWallet(curve, cardId, undefined, callback('taCreateWallet'));
        }

        function onPurgeWallet() {
            var walletPublicKey = getElementValue('purgeWalletPublicKey');
            TangemSdk.purgeWallet(walletPublicKey, undefined, undefined, callback('taPurgeWallet'));
        }

        function onSetAccessCode() {
            var accessCode = getElementValue('accessCode');
            TangemSdk.setAccessCode(accessCode, undefined, undefined, callback('taSetAccessCode'));
        }

        function onSetPassCode() {
            var passCode = getElementValue('passCode');
            TangemSdk.setPassCode(passCode, undefined, undefined, callback('taSetPassCode'));
        }

                function onResetUserCodes() {
                    TangemSdk.resetUserCodes(undefined, undefined, callback('taResetUserCodes'));
                }

        function onReadFiles() {
            var readPrivateFiles = document.getElementById('ReadPrivateFiles').checked;
            TangemSdk.readFiles(readPrivateFiles, undefined, undefined, undefined, callback('taReadFiles'));
        }

        function onWriteFiles() {
            var file = {
                data: 'CADB5CF8DE50135D2F4C9854E1C2BC14F829DADD663073E0DDCAD2EF3C9B1EAB41524A41FFECC401A4A9052CF2003B2FFD37A10993862FD44364FF9A219B6EB146365E93EC40FF043C2B55882B62F9C820AE74173C7DEEB44C521A122C727D9127B27108E1A9B1B590C8957BA50120E6717381E9C31E45646E57B7475C9EE9C81DEAE9D0DDB77FCFB6FE688AECCA9A4E7276BEA7AF1985ABC34A74199D2E13FA58E2FE1A3D34BE582FBC5A6A4431CD51F0AA92347972AE29153CBADD8E565D8BBED7FF7B73545C9DC43027A69727C15BBF5EEF88FA0F9748640C53FBE57CD033DED8D8A6F88692346A8235E87FA91DD61981E880E19A603BF2C79969B5126EAD411851A93DBC065B3495AB7371603887F624EF29F05F0789C305D4D7BA6E8BB8AE0AF37A3F5A01A8A66EABE3DF24F9C0C85BAB2C5687BA6D91E9EB388F228720157E54E903E77BF338634279FE560B3A787BC7C5E3F1AE4AFFCFAAB93ED3DEF3FEDA919688E552AF65C0CF2C36AE42B40C4DE94002385829B1D2ECF26E769B7E2BE855D41CB0DB7781A38EF60997DA33538C00C31EABF6104D591A7205AC4359D969D91B451581BAC479E93BF126BB71AD0030F9F1B13B36CADB9F374B8C643B7A1D674934A060EBE9A2A53333BE84AE163885C6515FCDAB30579461EE7D9612210225C82AB2A9FEE58B9F44208CDDE6F7D426B6DB988DA7EBD29BA80ECE6529DFA797B787DDAF97A986B89DEEA9A7F02DA7457CF1C3FFD3805258F8B06E48496AC71FD8A37ED52E678330262943724F0EA038D8B1073B9EFC228D9EF6E54282F055368872CA0D7F75EFB0382DC57BB6C71C28F6CEB6D135BC05CB555CDB95635ED4922011BC5ED17DFFC7C2D25F1F3D6ACC11D4B0F30F71E77A487F6B8DEBE1CFC74685818EA54509ED38CDD9B7E7C0AF7A3AFF854F06C6D7DD9EFC9DB4519B494329AE14FEC40AFBE79AEDBC14ECA5B2F9BD995F72D009242B387694D4BDF9460827B339DE17D4A6E687E753C47713AB012B57F6742B5083DA6C291DEB1E8FE656BBCFA6C4C08C67587574EB218AC3F3C156D576D6DBD77DAEB62267271384543D98A4A142394E0B130804DC44F514EE3D89AF0B1FEDEEE6C0E79D13A0B2D59B6D1DE995E72CBF23BD5A2ECF06FFB40C92A05F80C7B451A09402C099541920ABFF25F166334F7EAF1E168948EB0EB9D9DD22F317EAF6D44EC203C26F962005BD3EC2512D7B7A79BCCD6380564C3306536EA892F63BBCD43CBB0823CCBA79A93A4739C199F7BAB85FD1C1BEE24D7B2C79165E9D2480B7E818DBC5F6029DD77A664A6B407E81CCE78AB128529267C75A5297EE2BDB0B46392525B4D201447B56A2D723B825EF6BB0C8F5FE8E25F4EE8EF723664AD8CE31305A30A4C13F3448DFE8F8387F7B840D377BC7DA8F2819150BCC070036D3F08BD4362011EB3E010E6B61D8CAF21E3C89E880EE9E735ABE8053B73086D6E8E2574C4BDDF9586B74B416A3B1FBB5028F4B93DE3893F5C09D95B37A303D6F56D0A2E3E54DF1897D69AB1733833939AA7E1CBDA0E73B1D7A68B4883C14CE34C05A048F181B753D305527940C7AD092F88C814D92926518469051E007FC540D62041DCF65E23D72F6DF8B5F22D480DF23A50F5C5AD304CAF350F5A3E4B78C2188CB1ABAB4DE3A1198D9068C3F108D9D261FA70686986B3F27F6253FD50657EF10E81AB45410225713EB9F36F2B2F758F197AD442DF588F457C25434079DAF67934BD4C230C6B758A7958F4A8E327BAA0F1723878C7A85A41CDFABEFD4806332B126C8FA6F639352855616A4434BB3F5176698ECBD7717CFDB9C224304A04DA82908FE19F2A409987003AF92666C8DBBD9596D0C6DE464A4DB3BFE6C861A6854AACC8FD6AB735CD83E995D028BEBA896DD020A59AFF772B6F5DD6CB1DF6587CED61277201E3820A11BB92351912A54CE76470AB046190E0D6156037661ED3C34200839FE0855C3B137656DD65E061D5154DA6178CCF12B7E8712603B6051727CAE7B031EB73E83B65AE1A33CB56079B43392087091AB29E30446C0C96833F2B18AA7AD7591F2B75284CD32902C815801BCA053C334B6D8D78033661B1A6E27C6EC3F357C3630C7EC272A589C51621C7CA5D13DE8FE66939EF9AD91D3B3F920370F3FBDE46E85B38F466B5422971B4438282D975C5DF39DD76E95E3F4052D5CD6EDD9D6DF47B662D758E821AFCEFB5B7BC1380D030ED9A9E71B1E12277946B6BF29DC5427D0C7C39CFD68DC48CF5C8C441C0BD477A6CE0B4CBC3D069B8AF13E2AA6F7106B9216BD4AC518CEDF0CC1D9E469DAF4804E320D3B2DD3037E976FFDE54AA2E784D6AE04AF8D775C45FA3BB781B63C85905DAA122A391DEC6C8F9A4CFF0C3632B8F12C7FE036D120B14E0BAFA2F665E6800EA558BDB53BB5FDD4EAC8488375858C9D7500A78559AD685FE873279D3FCB31DF09039547C8625B1AAE55E0F1A829F9D11F1F75DB97947844E6EA51898E469F6F17719825559FB474AEEBB573C593AE8E1F6D0F8D4F979FB2DE7EDFE5458093A50C7E4832EC345CA23C164E9B92FCC6423ADF62212CD5FACE0C01353D2942329396F6CD1C436B9685D1AB770825D607DEBA18A2F62C6797E644ED51A92AC59F7BD026F065F5419BAB79E2DEDDE57BD163CDABBC95DF0DC2C2D7F991E4B903A899D94BC72711533A28D817F6C4BDC8FFF026910FF6A50A6BE7B25B7B3AA7459C4706CF86360964A1D6B3FF7EF970F68D802297C77B6C2DAC879923902546D0F11199AF4A4DBD0CF1B13095546B6436CC209A5AFE3DB5C117A141E4C8596F834E9A9794EE7004E69932881CB1E80299B49DC840D25159DEE22650F171F46CE6539FFE154939954E5BC42DE38BF52713088D65AE27CCC288979111585B1563B2B2810842A7D4931D4A593E0FF4BE3768A2D1A31C4C426128C8F8A9E7A64885AF532A026E275DA9423750F277ED2B30CAED2C93626906C83D0FEBDF59ED56DDF1C2209680A91F687098901CDDF256CD8E8061755BDAAA55A9F24D00742FC2391BF86957AB255BA02E2899E5F1C7EC23EDF2020EBC7EB63B9492753ABEC56C6C460774A4BDB7866688C2531D2F771ECB19F53EC9C3F96C916F04B2044FD3A2C605D34D1EDEA11A1964A7C96F10F4E9C015D3632E3136C985175EEB39242D6EBDDF7DB80B7F4C6862C1BFAC6CD8D35D16557C67B8AD0B77C5C16AE89D36585817223905EB319E87C319F95532D11A9C8D4B417CD05778F7D01DEF556B6D0829689DE4D87E7868828FFB94E3C1BEE65B19017808D8138C1DDE45BEDE6CD83F0B625F792416A5B132E27872B019FD18585AAE504B815EF72763DB6D7E9FE5E92E979B8547B92A78E2AE7DEEF134F3F2C9352C190CDE2D2EB3780D3944CA1E1F36E8F00D914C115EA53D4589A1154228E38A5ED1645A5CDEFD20224AB717A5789455C32B30BF4E1A21AD5EBFA7DA79C23D8228A5A54899A73DA3B414E47EBAAA157F1FD0BBD1A720A1F75D90CB76C123B62052397A9240CDE68884CF1F5CFCE98BCC7B9B07C0B53B1B01EE5B008C877FD7DC8A83D40120613E9D8772700C2290B679549A0A1E640A77A35337ED2EC886785C02847055F1D5C69D9D1D2B5F888D707FC20B93CEF62BBBD1C694C0322C18AA903C93EBD14A634CFEA3B80128274DD7A627FE14863D2D22C523050127AF3BD2790B6B6F191A2AA1968C93A9048FA577E9402468DF968EB47407DFBE9CD586D38419405C0633D5ABAC49B9E45B1D3D39ED278E1D91BF12EE21C574B56CD2294C794220A203B3559E4492FC402F61C49E6426D1439430F788529F1FC9FDACDDCAB97A5002AEB074DADEEE9873BD600DA8636EDA1E1FABF1F9DC208238A843AD871392400C5FBB1F2B7E75E7DF96E3623E215AFF43F844B8FAA747588C23DAA5E6B69EFF2B41725C6206F22CD23C9CB3FE38E369BF6DC2F6AB30A0FF194B1B8D1A905606714DF52E63F1551C8E4BB07EC3E143A832F2ABF1F0676A85F90D66024136F8B53C01743ECB6FD29322997C18D0784DA6B3F48E70B7C6160085D91B86803B6F85762E85A980A29B6D2E7F47E55DB25433F9A55DFDAB1A087E51BF0DFD13930BB55934AAD10CF5DEC655001A52CEECFE3D9E9321492E233620847788B46C71F0983CE01023FAA9E1D9B2227213AE10397934592648573EEA288AC5ABF65A3730819075950005D1F1A42229288892D04FF7F56B94EE8D6581D0F033D7C41A0CD52FCA0D2F647957900C077492701BD0ACF2EF0FAD5B8A4F19D83338959A50CE6D7125520680B1A9B40EBF7234DE0DAEF34C083B9D67C9A8C41BBB286512AB4C1A386E10AE7F3D2B728AEE5B78F565D3B032AC23E7B9CE4747D3A2ACAD8D2F502101BB80316F9F3CCCE98FDEDD797F4B4D90E3B4633E573A4277F5E970C32CD1BBE2DF8511E57EF514FEB180843EA98B4484A3E6B3B63ABDE5747ADFCADF5E4447030FCF0D77B5995EDE64B80BF2CA85BA2EA31E0C0C8ABBC3B8D132068C384FB88706C6C3AACEFFAC1BA34AC72A4FBAE43920F39BF0C56EDADA992887EC2B97EA19316FE508CF10B3AFF7E0B58DD558DA4C728BFFF62EEECA9958D72C77E8753A3005D4C25C79F03BF64688BD05F384569698529AD868432587A1F6EAEF5FFD98DCF2706118F268008828C425CECAAC530EB6EAE4DE6B13906CBFFFDD28718648BC7047049DF4FCC82D3E21C0684D6C12A6CF46559333043568A5E92E23A67ADC4235AC8A951A2CA15D3F397CA317C9ABA97F9E5676D570DA5EDA6271070CE9C747D638E7A3E2B0C07E102984E544EDD84E9061DE94611F47386B0FF3F94AECD59D181D9266DA386575D4B011B2713E40E28FF5F93DE2DFEDA68EEA828F30ECAB10BB03E06520B3D64C9625F77C9E0DDA5E06245DC43F85A26749DE3C7B247BFEF127755507BED147247F280D2019C37E496AD59F1B66311466644AD5B899D5E2581BFCF824D07AD7667D104EE50A71A10D46805DAA666FCC23CF5CB16D09FE611F15E796F2777B49C36B68032DA939E107AC3A27CA7548709D9563AF61D36B487B8A6F1237FC9D2EBD850F83B0829713270594AB2BDBBECD5D51611C6AB4BEF34C7A3A2AF926B3CEE0D92C74F542047F6B419F1E1DED51871035B1A4129AEB2994EA1A9961EE35AC401BBE025CC377BD3159D6D26E0A044E4DA24BF5B42A964B1C3848F642BABF0422F1662AD250167F9CD537C142C562E0988DB710A8549F5ADB28CD5C486951A4C2F9C37F6205F9F80AE4093551E217AD222CF38215906EBF433586703412E8B09DA7092F8CC4CDC3175E7C9C8604B218DAD5A17CA65C1747AEEE139A9A86091B564235F6DEA1209FB8881A5A70AE29790D6CF822322ADD7734B5F60A92C82CFC03C18032254261E2E3AEE1C86521F11100E3F9815F010091CA7CC90A3CF5C2D701DC5CC1B4B771D53875B556385B9912A092C6241215C59A5ECB2787915D55EC6AF0FA17FD49CA2434B545436A510F8C709AF756CD4FC36A3FA930BB6AE4CBBD956047F18ADAF75B635CFD028D977BA425D103C4215DFA65999F3E8475441A030117E50A1D6A1AE7189F2E77E23CF3D32AC92C4C806362D9E50DD9DFE8CB2C8862B81904FAF3936935404B6539E9BB756162D6475EBCEC8546891EA1F63299092D61659A1563EA15213A95109CB0B140FB9F33CB9EB2BD900E220EAAF54008F2184C3EC366BC2A2B97CAB3C2E51FEEB34C49F7790A6FAB27E1C317B0DA34873020D318DAA1F73633C814C2F9E707C1B44144BA585562D01F432D09AEA170AAE29D920CABE084B757ADC1DDB8116817DA1089A29F4AD0FB66781421D82BD2AE29223CF628EE82F9CD0BDC40FA07CA87CAE61292851B576A355104E051C70D5FE005085A783E73CC28AAB17033B72B954BFBA8104274D595A309121CB10765944FEC45A5F770EE3BDAE0233A6309F5B707B10FC0BCB899382B20C5F470346A988A8AC1F216A4FD17819D8FEE4ED6569688C60873927BC40CC85F91A1B0734B17CFE6E404AC354745F14633589EC56492A608FD910DABFE35859E1CD28322B3B7A6E94AB2724A934D0DD6E4B27996DFC4DF7DE3E217AA965CEB6F5C242E8F641D16F568DD085A0BC7A42F95F2D2310671979D2D629D5B5BC9BB17EB38FCF977C92D0421E7F1D45E9BEBB526B33E5F88CB625DE866F4915971482717582C4BA053807D814E77C962C8AA34DD7777C5D4A798992C716FFB7F963A35DA69C776B478E45DF0468E9EA1BF7E99DC96F258B440AB5135301C1E13290D04976D5DE8B94DC593CDB487A1CF65F1D5ECAFA00C41A36890CE2D0A645A474BD8F5D9DE14030F213294EF31F40F35034930E0E42D214FEFCAB354D53C65B0EEDEE0B88D7E524CF7A8200A03F768065317036CA419FC74FE220DB964A5A18419CCD9D22DBEB37F1E425751CC5041BC5FC623EA8C17EE1AFD5565AD86F71837D5059537DACA12627173C7C77548BF3A670FECFEA17EDAB728B934DCE690AFB005F08B6CF67C4E6E4867217626F8CE0CB3E752368270FB74B1865A9EFB8F4E81204A515BEF2C5A5416D23832B2FC81BCB0E8151E0222271CD1688C22F0D8546D2ACDFA8E954F5017A7E0CB9FF0F5A84D73B6ED9D7E8282D9834FD08BF4012DD4AED745BFBB99E638E7B5671EC3384AB78E89A99255E3C7D41396D5FB04220B74186115A9806A070F101C94EBFE35B9109A64F24F86A5913CD77DBABA347481CF5EBD7D2C796E8D5AD2BBE451725C8499039429EFEE7BAD8CAFF9059D174FAB04CE3E73B6CA00B14861FB550AE9134B6059D794D0A57CBA02A1CC7965C2756873124816C2391858FDA3463D6B30E6557B84E1905DC8021CC2726D0038FBEA84B5A6294D689C436EABF99EB817E2D962F5A7A589527431D94E5718B48A92F1A8E1D5898BE00F6109127E1FF18915194D486FBE57D7B0B0F6778D2DDD1B312A7866E8B1987C81F72464E2A51AE5186854552112833093565913754B903C481F093EEECD6486E839B01E5BE01DC521C1E5EDBF5193B2BF7B6EE51E55E2CB611F419573062032A94CFDCE63D5B084314B6C836EBA63E9730EDC6660667128740257FDDC0FA9E98D931FCC652EA7BE321966C34780F0E2671B162F17D855992FE3EF98C5E245615FACFAA3D7151EF3C09809E218C01B47DD2F941849D1EFA69B2E692C5BEF2D3F0C312DD3557760ED067C450B3B50ECBD0AE520892E84B46E205C186DBE4CFAF97171A8ECA68301E0225C22AA11F5EB50DCE51C901753B4C5041773E55986B18E68BC1CBD463DBE5A5998B0F2310C9195EA10A2824B2E02A3D98ABF0229B08EC639BA2DC3520A834D5CAB1BC914B572702B847D506F40927BB4C3208E7DCF0F449CE1744E3E81CBB9CE728BED9414D458AC96FA484FA52723AA90425E93F62AC3BF722FB57F47D585BEB75C0E263BEC53A681A892B926BF1FB27D59066328E2F631C134404C51F9D3EEA8AEDA25BA46E91A52CA4DBB84766FB01D446905766AF190D4C514D46F83C224C3D9DEFB06BA948779C94FD7460B33F5C34A8F2916C6EAAAE53E3F93BDAD4A75D3EFB5FF3C8F4F435F34936EB415DCBD7037D61AB77E88F31F9622B9D6EF35A99E40720E275E19E8D0416D7E07536056EBC999B1C735169CDC0BADF9C0EC6F70F423B4A0F93EB802E51D68DB5F593465B7359DD118DBB98B4833D1185B4DDEC8B0FEABEDCA2F46F9498D7A16F76D885854E1803052CA22F884B851A5F7A154C08E9DB086EEFE10A1506A756D6133621AFC12011353E83F4F24C9B533C44D219D99AF493CA581188FB6326E26634B3D04AF1D455452651501C4D1A030E9D81E49544D858DAA7C2D0570DD3D833C37FAA680895701A1640D580003D24B79C948E873D37E9A8C8DA1B01B9B677F34A62AAFEBE046DD4AFB5EE13D3AAC7BC495E24D47098A777AA745144A5D7A9AB4F50C01DE2F06F86D43B80E66C393A1ACF94DA06D0DE20AFBC68A8F4FC674E786B566613B85120438A014062FE131A116F39A9359783B9046A7ACAAEC8EBDC3526E1EE857AEBAEF0CB32C0CE8931CECBCDD4B88F862CE1109E5B6E6651713CCCA95C9FA60E4C4C18297979874FABCC1D94E5CD6DD4291706793269D92AA9C15B0D41C7DE7D593A9464FA5DE3A3A1067827A5D38DB11B2D70FD23C14170543CF27464FC8A25C11AB6FA225254F29A0B82261134C4EC6DAB92AD13B231F2321C29511BC3A683B7377993BA593281C59D1301CE3CE42CD1D8412CC50304CB6C39BA1CB9F3E9603E55EF9C80C63D2F5CA9513E09BF84B07E6EAFF495B71A1DD929AA3039705FCCB03242C76D2E4B4E683FD41EAF67AE03B15BC0F8BB8CFDE3561F514BA572982456047D0A05C09F40DF34002EBF6C36A1C81283022D0D1E1B1B1DF7F22E16C3D46A058A0DDD248FE2CB31AC1D9442618D05116BA72FD602F5D5485E453A9147147874618A1B24DD0692420DB3F98FC840EBFB399BBF6852ACA62156EAC5065662D4F01DFEF77469EB0DE201A2576C6F2F7404123CF3844901D30CDF80787E099225769F793B5AFAE037B011E192CC146EE3AC3761867FE0C0C2181FC713B7F582461B1B3C927E3BD701D2A7A1479F9E72A23379A5AD2DCCF912C89BC3FA3621D5ACB771AAFF6D452B443FA6085059E393FE06FDEFA30F7029BA5B1733CC8E513410C54BD68E9E59ED758460E42A1B2411AB0D9F49B3DABD00DAA90625550B266710B4FCABB52831001447FE5256E28F9BBDCACCE1DC8CBE554ED5C52FF840496D8A4AB68D613649B912213D6B8BE9915F78CB8CBFFAE8C894BFFED8EEFF396CCEDDC320E5D519D4B9F0779EB770C14F347E805AC6419B580F0EB957706D080FCEFC0CD2CA495D6DB080CEF2784D5379E5AC6B03613AB246A5FD57A4074A2D7D65F4929CE078FBD1ACE4A442543149D12A31D3A2C1526A3FAB2834E36EF9286CED371420568CA21AF7E5A6F230E2F0F82E01CD41E4D96F815F36228A85928AA936B1CD6A9A9ACCB215E36855861D8E33C3CDB0E56A0935A452309E7430171F57CD4AF6C5B344F93C00FEF7AF35B39C056DF3C6A482940F5E960E533D6197A06B42C61E9786BF54D0EB25B87759C6CCD0488AFB32F2AAB1F84201B7B6028E44F13603CCC72D5347602EF59AC7710ACEFD380325D37DBDC091D9DA624A2418ED22FA811F8610B3A9467A81A72F84A60DD9BD6F0E7FF4AD0293D776867E072805366D4228F727EFD502553758BBFEE4E998DEF755D11CB70503A2B42A04E269C9EF4D0B85494C073C8BDBA688E9E76410E660F42F4657C62F1D72B915D03B52FA3E363BC0276C5B112181548B999DB2EF1A33CF1AF98D1FA26F0A92FC705CE166FF43DE6E767ADE40B1D099C3C08D6F69142A3139BA6CC7B9BD9BE342E90B09BC4C66C19973947116C2B36305E572F58CACAB766EC54964C356A0A1A41982C8DE8D2A8191CD729860AEF3DCC7A835F65730B27CADB8C0DBA8AC1382BA2E1130C5EAB73A7D6050673B2C4C7310FCB1EFC87C96FE71D5C295A7477BE1374F7E98ADD3140B93D49DCAD8B46A22C5D72B366248B75AED0826E8CC2EC82DC7F41A4A362D44B99F6E8AFE35F2CF021BFDEB915C3F33AE65B4FDE2E1C85568BD115BA35226318355385E0A714C724B248D879075B6BF75D85C7F0827DFB6D1AD650463528ADEEF2E3D611D4E523EDFB6AE4D6DD26D77FDF7FE9C426684F647771EDAA1A084B13D04B2146298DD759B1FC0F582AF73E8BA5E23060A3D7D3B6E1B38D0334A3C527D0FD5E8B07DAB72467B71B9C54F4C302485FE27FD8D37623BB9E633B2EBC8F91D2578C6B81453ADE2BFC2C3594A76DB11EAF7E9CDDBD86CA51BCA44F3404B9DDD9F955D5E833E8686E09279A41269D168419EAB03444910EF53C73F3C0AAD9A859577AF504BE65EB09E3011F4C83F16A700D466194B01E1233AEB6FD80E42AD52B322727AE563EE484CB448977D8C5ABCAF16D3F8DCC8127FE991929816D8770A6131B77F1BF447A7FBFD68F42BB7ACC3C8E2C14D0E6F8C041E767E7CB7B15C37572FD6811E3A035F89184C3B735C1555E9DE9542E5A7815B63988301C1855EA01D1A0D54C7231364A4ABDEC759D67FCBCFAA5DBEF96A219F673D0F8C5F09D7870A4C59C9D972E9F90725C2AE14F39A24DADB788C26DEFB8BE48C257C0BBD7C67EDC1F34E40362582C241633C32DEEFE40F0FFA9E04E86BDA90E92C3435A7E5D4A6C7C1727763E593EB8372D50A7677A24CE493EE364671E9372B3F4D98A7FD6C6832C55A6032F2F2E84AE0ECAF59DD18464546876CB61DCCA0472C4E028B6A84CBD5B134AF003D2FBB1FB7FA15FD6B56461E956D7BB78ED8FC10D2FEA6BDC3F871DFFF3C0D8AD75073BCCA5DC3103DB49F89F0AAD68E5342EA8DF996CB0A4EF51D2DCC1D9E65BCD35FFAC5A9631E66AB56ED7F33528B77A72A55A6CAAB79E5B0BB1DD338E00FFFDA3578C212E8A7BE3578B2B510DFFAA1549E8D80AE15FDFD01F31DDDAC23161E693E706AB3D5327548F3882743D8CBD4DB3B88922173BBC1D754A95CC698F0D9A058063976A17C02A25F989E9C07B940CA69C8FEEACE5D365A346C5D003CA15C0C5723796C645B9DB1E9268BB8C96BFA6AE111ED67E3E33DB8ACF011DB83EC2C5EF10D099BF7D975F2CE5BD0C253A8CDCD3B302933ED69CEA088FC975E9DB0C83CE726D6AB789ADFB194F6D04A011F629A83CA96A532093E8DE6B8776AF4E45052EFEE4595A7EA5120A260D9259058168A8C0673996AFD4E788F26C9E1C7C30D2F59812E0616010',
                counter: 1,
                signature: {
                    startingSignature: '673B6D30FD65329A4172712CEB88519961F169A0C5C9F6BA55BDC42787DF4408AA01A2A91203297C4871E4313F265D7CDBBB2E29198F59E08109A2C6CF1A683A',
                    finalizingSignature: 'EDED56C52C20FE7B948ED2B95C317C2E533B5072EB6E7CF372719FAA897ABDC000309311CAC3C4B8270F431453D04F728D053A5CF4D9730E39BF5E8E910D20A9'
                },
                issuerPublicKey: '045F16BD1D2EAFE463E62A335A09E6B2BBCBD04452526885CB679FC4D27AF1BD22F553C7DEEFB54FD3D4F361D14E6DC3F11B7D4EA183250A60720EBDF9E110CD26'
            };
            TangemSdk.writeFiles([file], undefined, undefined, callback('taWriteFiles'));
        }

        function onDeleteFiles() {
            var index = getElementValue('DeleteFileIndex');
            TangemSdk.deleteFiles([index], undefined, undefined, callback('taDeleteFiles'));
        }

        function onChangeFilesSettings() {
            var index = parseInt(getElementValue('ChangeFileIndex'));
            var isPrivate = document.getElementById('ChangeFilePrivate').checked ? "private" : "public";
            var changes = [{ fileIndex: index, settings: isPrivate }]
            TangemSdk.changeFilesSettings(changes, undefined, undefined, callback('taChangeFilesSettings'));
        }

                function onJsonRPCRequest() {
                    var request = JSON.parse(getElementValue('taJsonRPCRequest'));
                    TangemSdk.runJSONRPCRequest(request, undefined, undefined, undefined, callback('taJsonRPCResponse'))
                }
    }
};

app.initialize();
